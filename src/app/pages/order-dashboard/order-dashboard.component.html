<div class="dashboard-container">
  <h2>📊 Order Dashboard</h2>

  <div class="filters">
    <div>
      <label>Start Date:</label>
      <input type="date" [(ngModel)]="startDate" (change)="loadReport()" />
    </div>

    <div>
      <label>End Date:</label>
      <input type="date" [(ngModel)]="endDate" (change)="loadReport()" />
    </div>

    <div>
      <label>Report Type:</label>
      <select [(ngModel)]="reportType" (change)="loadReport()">
        <option value="DAY">By Day</option>
        <option value="MONTH">By Month</option>
        <option value="YEAR">By Year</option>
      </select>
    </div>
  </div>

  <div *ngIf="loading">⏳ Loading...</div>
  <div *ngIf="error" class="error">{{ error }}</div>

<div *ngIf="!loading && reports.length">
  <canvas baseChart
    [data]="chartData"
    [options]="chartOptions"
    [type]="'bar'">
  </canvas>
</div>


  <table *ngIf="!loading && reports.length">
    <thead>
      <tr>
        <th>Date</th>
        <th>Orders</th>
        <th>Quantity</th>
        <th>Revenue (₫)</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let r of reports">
        <td>{{ r.date | date:'dd/MM/yyyy' }}</td>
        <td>{{ r.orders }}</td>
        <td>{{ r.quantity }}</td>
        <td>{{ r.revenue | number }}</td>
      </tr>
    </tbody>
  </table>

  <p *ngIf="!reports.length && !loading">🙁 No data found.</p>
</div>
